<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agent Safehouse  - Sandbox your LLM coding agents on macOS</title>
  <meta name="description" content="Confine Claude, Cursor, Aider, Gemini and other AI coding agents to only the files they need using macOS native sandbox-exec.">

  <!-- Open Graph / social previews -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://agent-safehouse.dev/">
  <meta property="og:title" content="Agent Safehouse">
  <meta property="og:description" content="Sandbox your LLM coding agents on macOS. Kernel-level enforcement via sandbox-exec — deny-first, composable, zero dependencies.">
  <meta property="og:image" content="https://agent-safehouse.dev/og-image.png">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Agent Safehouse">
  <meta name="twitter:description" content="Sandbox your LLM coding agents on macOS. Kernel-level enforcement via sandbox-exec — deny-first, composable, zero dependencies.">
  <meta name="twitter:image" content="https://agent-safehouse.dev/og-image.png">

  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=JetBrains+Mono:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0e1a;
      --bg-warm: #0d1120;
      --surface: #111827;
      --surface-raised: #1a2235;
      --border: #1e2a3a;
      --border-bright: #2a3a50;
      --text: #dfe5ef;
      --text-bright: #f0f3f9;
      --text-muted: #8494ad;
      --amber: #d4a017;
      --amber-dim: #a67c00;
      --amber-glow: #f5c842;
      --amber-bg: rgba(212, 160, 23, 0.08);
      --green: #4ade80;
      --green-dim: #22c55e;
      --green-bg: rgba(74, 222, 128, 0.06);
      --red: #ef5350;
      --red-dim: #c62828;
      --red-bg: rgba(239, 83, 80, 0.06);
      --blue: #60a5fa;
      --purple: #a78bfa;
      --font-display: 'DM Serif Display', Georgia, 'Times New Roman', serif;
      --font-body: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', Menlo, monospace;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html { scroll-behavior: smooth; font-size: 106.25%; }

    body {
      font-family: var(--font-body);
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Noise texture overlay */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 9999;
    }

    a { color: var(--amber); text-decoration: none; transition: color 0.2s; }
    a:hover { color: var(--amber-glow); }

    .container { max-width: 1040px; margin: 0 auto; padding: 0 28px; }

    /* ========== NAV ========== */
    nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10, 14, 26, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
      padding: 0;
    }
    nav .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 56px;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: var(--font-mono);
      font-weight: 600;
      font-size: 0.938rem;
      color: var(--text-bright);
      letter-spacing: -0.3px;
      text-decoration: none;
    }
    .logo:hover { color: var(--text-bright); }
    .logo img { width: 22px; height: 22px; }
    .logo .classification {
      font-size: 0.563rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--amber);
      border: 1px solid var(--amber-dim);
      padding: 2px 8px;
      border-radius: 2px;
      margin-left: 4px;
    }
    .nav-links { display: flex; align-items: center; gap: 4px; }
    .nav-links a {
      color: var(--text-muted);
      font-size: 0.813rem;
      font-weight: 500;
      padding: 6px 12px;
      border-radius: 6px;
      transition: all 0.15s;
    }
    .nav-links a:hover { color: var(--text-bright); background: var(--surface); }
    .nav-links a.gh-link {
      color: var(--text);
      background: var(--surface);
      border: 1px solid var(--border-bright);
      font-family: var(--font-mono);
      font-size: 0.75rem;
      padding: 5px 14px;
      margin-left: 8px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .nav-links a.gh-link:hover { border-color: var(--amber-dim); color: var(--amber); }
    .gh-icon { display: inline-flex; flex-shrink: 0; }
    .gh-icon svg { width: 15px; height: 15px; fill: currentColor; }

    /* Mobile nav */
    .nav-toggle { display: none; }
    .nav-toggle-label {
      display: none;
      cursor: pointer;
      padding: 8px;
      margin: -8px;
    }
    .nav-toggle-label span,
    .nav-toggle-label span::before,
    .nav-toggle-label span::after {
      display: block;
      background: var(--text);
      height: 1.5px;
      width: 20px;
      border-radius: 2px;
      position: relative;
      transition: transform 0.3s, opacity 0.3s;
    }
    .nav-toggle-label span::before,
    .nav-toggle-label span::after {
      content: '';
      position: absolute;
    }
    .nav-toggle-label span::before { top: -6px; }
    .nav-toggle-label span::after { top: 6px; }
    .nav-toggle:checked + .nav-toggle-label span { background: transparent; }
    .nav-toggle:checked + .nav-toggle-label span::before { top: 0; transform: rotate(45deg); background: var(--text); }
    .nav-toggle:checked + .nav-toggle-label span::after { top: 0; transform: rotate(-45deg); background: var(--text); }

    /* ========== HERO ========== */
    .hero {
      position: relative;
      padding: 88px 0 80px;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: -200px;
      right: -200px;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(212, 160, 23, 0.06) 0%, transparent 70%);
      pointer-events: none;
    }
    .hero::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border-bright), transparent);
    }

    /* Grid lines behind hero */
    .hero-grid {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(var(--border) 1px, transparent 1px),
        linear-gradient(90deg, var(--border) 1px, transparent 1px);
      background-size: 80px 80px;
      opacity: 0.15;
      mask-image: radial-gradient(ellipse 80% 60% at 50% 40%, black 20%, transparent 70%);
      -webkit-mask-image: radial-gradient(ellipse 80% 60% at 50% 40%, black 20%, transparent 70%);
      pointer-events: none;
    }

    .hero-content {
      position: relative;
      z-index: 1;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .hero-headline-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 32px;
      margin-bottom: 56px;
    }
    .hero-headline-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .hero-headline {
      font-family: var(--font-display);
      font-size: 3rem;
      font-weight: 400;
      line-height: 1.1;
      letter-spacing: -1.5px;
      margin-bottom: 4px;
      color: var(--text-bright);
      white-space: nowrap;
    }

    /* Side-by-side split */
    .hero-split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: center;
    }

    /* Left: the problem */
    .hero-left { }
    .danger-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      border-top: 3px solid var(--red);
    }
    .danger-box-label {
      font-family: var(--font-mono);
      font-size: 0.563rem;
      font-weight: 600;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 12px;
    }
    .danger-flag {
      font-family: var(--font-mono);
      font-size: 0.781rem;
      color: var(--text-muted);
      padding: 7px 12px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      white-space: nowrap;
      overflow-x: auto;
      margin-bottom: 5px;
    }
    .danger-flag:last-child { margin-bottom: 0; }
    .df-prompt {
      color: var(--text-muted);
      margin-right: 8px;
      opacity: 0.4;
    }
    .df-flag {
      color: var(--red);
    }

    /* Right: the solution */
    .hero-right { }
    .hero-tagline {
      font-family: var(--font-display);
      font-size: 1.875rem;
      font-weight: 400;
      line-height: 1.15;
      letter-spacing: -0.5px;
      color: var(--text-bright);
      margin-bottom: 18px;
      white-space: nowrap;
    }
    .word-dangerous {
      color: var(--red);
    }
    .word-safely {
      font-style: italic;
      color: var(--green);
      font-size: 1.12em;
    }

    /* Safety points */
    .safety-points {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .safety-point {
      display: flex;
      align-items: baseline;
      gap: 8px;
      font-size: 0.938rem;
      color: var(--text);
      line-height: 1.5;
    }
    .safety-point code {
      font-size: 0.75rem;
      color: var(--red);
      background: var(--red-bg);
      padding: 2px 7px;
      border-radius: 4px;
      border: 1px solid rgba(239, 83, 80, 0.12);
    }
    .sp-icon {
      flex-shrink: 0;
      width: 16px;
      height: 16px;
      color: var(--green);
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    }
    .sp-icon svg {
      width: 16px;
      height: 16px;
    }
    .sp-icon.sp-deny {
      color: var(--red);
    }
    .sp-no {
      color: var(--text-bright);
      font-weight: 600;
    }
    .sp-allow {
      color: var(--green);
      font-weight: 600;
    }
    .sp-write {
      font-size: 0.781rem;
      color: var(--amber);
      background: var(--amber-bg);
      padding: 2px 7px;
      border-radius: 4px;
      border: 1px solid rgba(212, 160, 23, 0.15);
    }

    /* Description below headline */
    .hero-desc {
      font-size: 1.063rem;
      color: var(--text-muted);
      line-height: 1.6;
    }
    .hero-desc code {
      font-family: var(--font-mono);
      font-size: 0.875rem;
      color: var(--amber);
      background: var(--amber-bg);
      padding: 2px 7px;
      border-radius: 4px;
      border: 1px solid rgba(212, 160, 23, 0.12);
    }
    .hero-badges {
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex-shrink: 0;
    }
    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-family: var(--font-mono);
      font-size: 0.688rem;
      font-weight: 500;
      letter-spacing: 0.5px;
      padding: 5px 12px;
      border-radius: 4px;
      border: 1px solid var(--border);
      color: var(--text-muted);
    }
    .hero-badge .check {
      width: 14px;
      height: 14px;
      border-radius: 3px;
      border: 1.5px solid var(--green-dim);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .hero-badge .check svg {
      width: 9px;
      height: 9px;
      fill: none;
      stroke: var(--green);
      stroke-width: 2.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border-radius: 8px;
      font-family: var(--font-body);
      font-size: 0.875rem;
      font-weight: 600;
      transition: all 0.2s;
      text-decoration: none;
    }
    .btn-primary {
      background: var(--amber);
      color: #0a0e1a;
    }
    .btn-primary:hover { background: var(--amber-glow); color: #0a0e1a; transform: translateY(-1px); box-shadow: 0 4px 20px rgba(212, 160, 23, 0.25); }
    .btn-secondary {
      background: var(--surface);
      color: var(--text);
      border: 1px solid var(--border-bright);
    }
    .btn-secondary:hover { border-color: var(--text-muted); color: var(--text-bright); transform: translateY(-1px); }

    pre {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 18px 22px;
      overflow-x: auto;
      font-size: 0.813rem;
      line-height: 1.8;
    }
    code {
      font-family: var(--font-mono);
    }
    code.il {
      font-size: 0.781rem;
      color: var(--text-muted);
      background: rgba(255, 255, 255, 0.04);
      padding: 2px 7px;
      border-radius: 4px;
      border: 1px solid var(--border);
    }
    .c { color: var(--text-muted); }
    .k { color: var(--green); }
    .f { color: var(--amber); }
    .s { color: var(--purple); }

    /* ========== THREAT MODEL / KEY VALUE ========== */
    .value-section {
      padding: 80px 0;
      position: relative;
    }
    .value-section::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border-bright), transparent);
    }

    .value-banner {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 48px;
      position: relative;
      overflow: hidden;
    }
    .value-banner::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--red-dim), var(--amber), var(--green-dim));
    }
    .value-banner h2 {
      font-family: var(--font-display);
      font-size: 2.25rem;
      font-weight: 400;
      line-height: 1.25;
      margin-bottom: 14px;
      color: var(--text-bright);
    }
    .value-banner h2 .no { color: var(--red); }
    .value-banner h2 .yes { color: var(--green); }
    .value-banner > p {
      color: var(--text-muted);
      font-size: 1rem;
      max-width: 580px;
      margin-bottom: 36px;
      line-height: 1.7;
    }

    .access-compare {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .access-box {
      border-radius: 10px;
      padding: 24px;
      border: 1px solid var(--border);
    }
    .access-box.without { background: var(--red-bg); border-color: rgba(239, 83, 80, 0.15); }
    .access-box.with { background: var(--green-bg); border-color: rgba(74, 222, 128, 0.15); }
    .access-box h4 {
      font-family: var(--font-mono);
      font-size: 0.625rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 16px;
    }
    .access-box.without h4 { color: var(--red); }
    .access-box.with h4 { color: var(--green); }
    .path-list {
      list-style: none;
      font-family: var(--font-mono);
      font-size: 0.781rem;
    }
    .path-list li {
      padding: 5px 0;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .access-tag {
      font-family: var(--font-mono);
      font-size: 0.563rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 2px 8px;
      border-radius: 3px;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .access-tag.rw { background: rgba(74, 222, 128, 0.1); color: var(--green); border: 1px solid rgba(74, 222, 128, 0.15); }
    .access-tag.ro { background: var(--amber-bg); color: var(--amber); border: 1px solid rgba(212, 160, 23, 0.15); }
    .access-tag.denied { background: var(--red-bg); color: var(--red); border: 1px solid rgba(239, 83, 80, 0.15); }

    /* ========== SECTIONS ========== */
    section {
      padding: 80px 0;
      position: relative;
    }
    section::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border-bright), transparent);
    }

    .section-eyebrow {
      font-family: var(--font-mono);
      font-size: 0.625rem;
      font-weight: 700;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--amber-dim);
      margin-bottom: 12px;
    }
    .section-title {
      font-family: var(--font-display);
      font-size: 2.5rem;
      font-weight: 400;
      color: var(--text-bright);
      margin-bottom: 12px;
      letter-spacing: -0.5px;
      line-height: 1.15;
    }
    .section-sub {
      color: var(--text-muted);
      font-size: 1.063rem;
      margin-bottom: 48px;
      line-height: 1.7;
    }

    /* ========== WHY GRID ========== */
    .why-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .why-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 28px;
      transition: border-color 0.2s, transform 0.2s;
    }
    .why-card:hover { border-color: var(--border-bright); transform: translateY(-2px); }
    .why-card h3 {
      font-family: var(--font-body);
      font-size: 0.938rem;
      font-weight: 600;
      color: var(--text-bright);
      margin-bottom: 8px;
    }
    .why-card p {
      color: var(--text-muted);
      font-size: 0.844rem;
      line-height: 1.6;
    }

    /* Why list */
    .why-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .why-list li {
      font-size: 0.938rem;
      color: var(--text-muted);
      line-height: 1.6;
      padding-left: 20px;
      position: relative;
    }
    .why-list li::before {
      content: '';
      position: absolute;
      left: 0;
      top: 10px;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--amber);
    }
    .why-list li strong {
      color: var(--text-bright);
      font-weight: 600;
    }

    /* ========== ARCHITECTURE TABLE ========== */
    .table-wrap {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--surface);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.844rem;
    }
    table th, table td {
      text-align: left;
      padding: 14px 20px;
      border-bottom: 1px solid var(--border);
    }
    table tr:last-child td { border-bottom: none; }
    table th {
      font-family: var(--font-mono);
      color: var(--text-muted);
      font-weight: 600;
      font-size: 0.625rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      background: var(--bg-warm);
    }
    table td:first-child {
      font-family: var(--font-mono);
      font-size: 0.781rem;
      color: var(--amber);
      white-space: nowrap;
    }
    table td {
      color: var(--text);
    }

    /* ========== AGENTS GRID ========== */
    .agents-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 32px 16px;
    }
    .agent-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      transition: transform 0.2s;
    }
    .agent-card:hover { transform: translateY(-3px); }
    .agent-card img {
      width: 72px;
      height: 72px;
      border-radius: 16px;
      background: var(--surface);
      flex-shrink: 0;
    }
    .agent-name {
      font-size: 0.781rem;
      font-weight: 600;
      color: var(--text-muted);
      text-align: center;
      transition: color 0.2s;
    }
    .agent-card:hover .agent-name { color: var(--text-bright); }
    .agent-yours { }
    .agent-plus {
      width: 72px;
      height: 72px;
      border-radius: 16px;
      border: 2px dashed var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      font-size: 1.625rem;
      font-weight: 300;
      flex-shrink: 0;
      transition: border-color 0.2s;
    }
    .agent-yours:hover .agent-plus { border-color: var(--amber-dim); }

    /* ========== ALLOW / DENY ========== */
    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .policy-card {
      border-radius: 12px;
      padding: 28px;
      border: 1px solid var(--border);
    }
    .policy-card.allow { background: var(--green-bg); border-color: rgba(74, 222, 128, 0.12); }
    .policy-card.deny { background: var(--red-bg); border-color: rgba(239, 83, 80, 0.12); }
    .policy-card h3 {
      font-family: var(--font-mono);
      font-size: 0.688rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 20px;
    }
    .policy-card.allow h3 { color: var(--green); }
    .policy-card.deny h3 { color: var(--red); }
    .policy-card ul { list-style: none; }
    .policy-card li {
      padding: 5px 0;
      font-size: 0.844rem;
      color: var(--text-muted);
      display: flex;
      align-items: baseline;
      gap: 8px;
    }
    .policy-card li::before {
      font-family: var(--font-mono);
      font-size: 0.688rem;
      font-weight: 700;
      flex-shrink: 0;
    }
    .policy-card.allow li::before { content: "+"; color: var(--green); }
    .policy-card.deny li::before { content: "\2013"; color: var(--red); }

    /* ========== NECESSARY EVILS ========== */
    .evils-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .evil-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px 28px;
      display: grid;
      grid-template-columns: 52px 1fr;
      gap: 20px;
      align-items: start;
      transition: border-color 0.2s;
    }
    .evil-card:hover { border-color: var(--border-bright); }
    .evil-icon {
      width: 52px;
      height: 52px;
      border-radius: 10px;
      background: var(--bg);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-mono);
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--amber);
      flex-shrink: 0;
    }
    .evil-tag {
      display: inline-block;
      font-family: var(--font-mono);
      font-size: 0.563rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      padding: 3px 10px;
      border-radius: 4px;
      margin-bottom: 8px;
      background: var(--amber-bg);
      color: var(--amber);
      border: 1px solid rgba(212, 160, 23, 0.12);
    }
    .evil-card h3 {
      font-size: 0.938rem;
      font-weight: 600;
      color: var(--text-bright);
      margin-bottom: 6px;
    }
    .evil-card p {
      color: var(--text-muted);
      font-size: 0.844rem;
      line-height: 1.6;
    }
    .evil-card code {
      font-size: 0.75rem;
      background: var(--bg);
      padding: 1px 6px;
      border-radius: 4px;
      color: var(--amber);
    }

    /* ========== STATIC POLICY ========== */
    .callout {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 20px;
    }
    .callout h3 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-bright);
      margin-bottom: 8px;
    }
    .callout > p {
      color: var(--text-muted);
      font-size: 0.875rem;
      line-height: 1.7;
      margin-bottom: 16px;
    }
    .callout > p:last-child { margin-bottom: 0; }
    .btn-sm {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 0.813rem;
      font-weight: 600;
      transition: all 0.15s;
    }


    /* ========== TEST GRID ========== */
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
    }
    .test-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 18px;
      transition: border-color 0.2s;
    }
    .test-card:hover { border-color: var(--border-bright); }
    .test-name {
      font-family: var(--font-mono);
      font-size: 0.781rem;
      color: var(--amber);
      margin-bottom: 6px;
    }
    .test-desc {
      font-size: 0.813rem;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* ========== DEBUG STEPS ========== */
    .debug-steps {
      counter-reset: step;
      list-style: none;
    }
    .debug-step {
      counter-increment: step;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 28px;
      margin-bottom: 12px;
      transition: border-color 0.2s;
    }
    .debug-step:hover { border-color: var(--border-bright); }
    .debug-step h4 {
      font-size: 0.938rem;
      font-weight: 600;
      color: var(--text-bright);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .debug-step h4::before {
      content: counter(step);
      font-family: var(--font-mono);
      font-size: 0.688rem;
      font-weight: 700;
      color: var(--bg);
      background: var(--amber);
      width: 24px;
      height: 24px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .debug-step p {
      color: var(--text-muted);
      font-size: 0.844rem;
      margin-bottom: 14px;
      line-height: 1.6;
      padding-left: 34px;
    }
    .debug-step p:last-child { margin-bottom: 0; }
    .debug-step pre { margin-left: 34px; font-size: 0.781rem; }

    .convert-table {
      margin-top: 16px;
      margin-left: 34px;
    }

    /* Struck / scribble */
    .struck {
      text-decoration: line-through;
      text-decoration-color: var(--red);
      text-decoration-thickness: 3px;
      opacity: 0.5;
    }
    .scribble {
      display: inline-block;
      position: relative;
      font-family: 'Marker Felt', 'Comic Sans MS', cursive;
      color: var(--green);
      transform: rotate(-2deg);
      margin-left: 6px;
      font-style: italic;
    }

    /* ========== FOOTER ========== */
    footer {
      padding: 48px 0;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.813rem;
      position: relative;
    }
    footer::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border-bright), transparent);
    }
    footer a { color: var(--text-muted); }
    footer a:hover { color: var(--amber); }
    footer .footer-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-family: var(--font-mono);
      font-size: 0.813rem;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: 12px;
    }
    footer .footer-logo img { width: 18px; height: 18px; opacity: 0.5; }
    footer .footer-meta {
      font-family: var(--font-mono);
      font-size: 0.688rem;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      opacity: 0.6;
      margin-top: 8px;
    }

    /* ========== SCROLL ANIMATIONS ========== */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 768px) {
      .nav-toggle-label { display: block; }
      nav .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--bg);
        border-bottom: 1px solid var(--border);
        padding: 8px 28px 16px;
        flex-direction: column;
        gap: 0;
      }
      .nav-toggle:checked ~ .nav-links { display: flex; }
      nav .nav-links a {
        padding: 12px 0;
        font-size: 0.938rem;
        border-bottom: 1px solid var(--border);
        border-radius: 0;
      }
      nav .nav-links a:last-child { border-bottom: none; }
      nav .nav-links a.gh-link { margin-left: 0; margin-top: 8px; text-align: center; justify-content: center; }
      nav .container { position: relative; }
    }

    @media (max-width: 640px) {
      .container { padding: 0 18px; }
      section { padding: 56px 0; }

      .hero { padding: 48px 0 40px; }
      .hero-headline-row { flex-direction: column; gap: 14px; margin-bottom: 3rem; }
      .hero-badges { flex-direction: row; flex-wrap: wrap; gap: 6px; }
      .hero-headline-group { gap: 6px; }
      .hero-headline { font-size: 1.875rem; letter-spacing: -0.5px; white-space: normal; }
      .hero-split { grid-template-columns: 1fr; gap: 24px; }
      .hero-tagline { font-size: 1.625rem; }
      .danger-flag { font-size: 0.688rem; padding: 6px 10px; }
      .safety-point { font-size: 0.813rem; }
      .hero-desc { font-size: 0.875rem; }

      .section-title { font-size: 1.75rem; }
      .section-sub { font-size: 0.875rem; margin-bottom: 32px; }

      .why-grid, .two-col, .alias-grid { grid-template-columns: 1fr; }
      .access-compare { grid-template-columns: 1fr; }
      .agents-grid { grid-template-columns: repeat(4, 1fr); }

      pre { font-size: 0.719rem; padding: 14px 16px; }
      table { font-size: 0.813rem; }
      table th, table td { padding: 10px 14px; }

      .why-card { padding: 20px; }
      .policy-card { padding: 20px; }
      .alias-card { padding: 18px; }
      .callout { padding: 22px; }
      .evil-card { grid-template-columns: 1fr; padding: 20px; }
      .evil-icon { width: 40px; height: 40px; font-size: 0.625rem; }

      .debug-step { padding: 20px; }
      .debug-step p, .debug-step pre { padding-left: 0; margin-left: 0; }
      .convert-table { margin-left: 0; }

      .value-banner { padding: 28px; }
      .value-banner h2 { font-size: 1.5rem; }
      .value-banner > p { font-size: 0.875rem; }

      .btn { padding: 14px 20px; font-size: 0.875rem; width: 100%; justify-content: center; }
      .cta-row { flex-direction: column; align-items: stretch; }

      footer { padding: 32px 0; }
    }

    @media (max-width: 380px) {
      .hero-headline { font-size: 1.625rem; }
      .hero-tagline { font-size: 1.5rem; }
      .agents-grid { grid-template-columns: repeat(3, 1fr); }
      .danger-flag { font-size: 0.625rem; }
      .hero-badge { font-size: 0.625rem; padding: 4px 8px; }
    }
  </style>
</head>
<body>

<nav>
  <div class="container">
    <a href="#" class="logo">
      <img src="favicon.svg" alt="Agent Safehouse logo">
      Agent Safehouse
      <span class="classification">Open Source</span>
    </a>
    <input type="checkbox" id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation">
    <label for="nav-toggle" class="nav-toggle-label"><span></span></label>
    <div class="nav-links">
      <a href="#why">Why</a>
      <a href="#getting-started">Get Started</a>
      <a href="#usage">Usage</a>
<a href="https://github.com/eugene1g/agent-safehouse" class="gh-link"><span class="gh-icon"><svg viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg></span>GitHub</a>
    </div>
  </div>
</nav>

<header class="hero">
  <div class="hero-grid"></div>
  <div class="container hero-content">
    <div class="hero-headline-row">
      <div class="hero-headline-group">
        <h1 class="hero-headline">Native macOS sandboxing for Agents</h1>
        <p class="hero-desc"><code>sandbox-exec</code> policies for coding agents  - deny-first, composable, thoroughly tested.</p>
      </div>
      <div class="hero-badges">
        <span class="hero-badge"><span class="check"><svg viewBox="0 0 12 12"><polyline points="2.5 6 5 8.5 9.5 3.5"/></svg></span>Pure Bash</span>
        <span class="hero-badge"><span class="check"><svg viewBox="0 0 12 12"><polyline points="2.5 6 5 8.5 9.5 3.5"/></svg></span>Zero dependencies</span>
        <span class="hero-badge"><span class="check"><svg viewBox="0 0 12 12"><polyline points="2.5 6 5 8.5 9.5 3.5"/></svg></span>Open source</span>
      </div>
    </div>

    <div class="hero-split">
      <div class="hero-right">
        <h2 class="hero-tagline">Live <span class="word-dangerous">dangerously</span>, but do it <em class="word-safely">safely.</em></h2>
        <div class="safety-points">
          <div class="safety-point">
            <span class="sp-icon sp-deny"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 4L4 12M4 4l8 8"/></svg></span>
            <span><code>rm -rf /</code> goes nowhere</span>
          </div>
          <div class="safety-point">
            <span class="sp-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 2.5L6 10l-3.5-3.5"/></svg></span>
            <span><strong class="sp-no">No full read access</strong>  - only what the agent needs</span>
          </div>
          <div class="safety-point">
            <span class="sp-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 2.5L6 10l-3.5-3.5"/></svg></span>
            <span><code class="sp-write">Write access</code> via explicit allow-list only</span>
          </div>
          <div class="safety-point">
            <span class="sp-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 2.5L6 10l-3.5-3.5"/></svg></span>
            <span>Sane, dev-friendly defaults</span>
          </div>
          <div class="safety-point">
            <span class="sp-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 2.5L6 10l-3.5-3.5"/></svg></span>
            <span>Fully customizable for your setup</span>
          </div>
        </div>
      </div>

      <div class="hero-left">
        <div class="danger-box">
          <div class="danger-box-label">Every agent ships the same escape hatch</div>
          <div class="danger-flag"><span class="df-prompt">$</span> claude <span class="df-flag">--dangerously-skip-permissions</span></div>
          <div class="danger-flag"><span class="df-prompt">$</span> codex <span class="df-flag">--dangerously-bypass-approvals-and-sandbox</span></div>
          <div class="danger-flag"><span class="df-prompt">$</span> amp <span class="df-flag">--dangerously-allow-all</span></div>
        </div>
      </div>
    </div>
  </div>
</header>

<section id="agents">
  <div class="container">
    <h2 class="section-title">Successfully contained <span class="struck">agents</span> <span class="scribble">clunkers</span></h2>
    <p class="section-sub">All major agents work perfectly inside Safehouse. They just can't touch anything outside it.</p>
    <div class="agents-grid">
      <div class="agent-card"><img src="https://github.com/anthropics.png?size=256" alt="Claude Code" loading="lazy"><span class="agent-name">Claude Code</span></div>
      <div class="agent-card"><img src="https://github.com/openai.png?size=256" alt="Codex" loading="lazy"><span class="agent-name">Codex</span></div>
      <div class="agent-card"><img src="https://github.com/opencode-ai.png?size=256" alt="OpenCode" loading="lazy"><span class="agent-name">OpenCode</span></div>
      <div class="agent-card"><img src="https://github.com/ampcode-com.png?size=256" alt="Amp" loading="lazy"><span class="agent-name">Amp</span></div>
      <div class="agent-card"><img src="https://github.com/cursor.png?size=256" alt="Cursor" loading="lazy"><span class="agent-name">Cursor</span></div>
      <div class="agent-card"><img src="https://github.com/Aider-AI.png?size=256" alt="Aider" loading="lazy"><span class="agent-name">Aider</span></div>
      <div class="agent-card"><img src="https://www.gstatic.com/lamda/images/gemini_sparkle_4g_512_lt_f94943af3be039176192d.png" alt="Gemini CLI" loading="lazy"><span class="agent-name">Gemini CLI</span></div>
      <div class="agent-card"><img src="https://github.com/cline.png?size=256" alt="Cline" loading="lazy"><span class="agent-name">Cline</span></div>
      <div class="agent-card"><img src="https://github.com/augmentcode.png?size=256" alt="Augment Code" loading="lazy"><span class="agent-name">Augment Code</span></div>
      <div class="agent-card"><img src="https://github.com/Factory-AI.png?size=256" alt="Droid" loading="lazy"><span class="agent-name">Droid</span></div>
      <div class="agent-card"><img src="https://pi.dev/logo.svg" alt="Pi" loading="lazy"><span class="agent-name">Pi</span></div>
      <div class="agent-card agent-yours"><span class="agent-plus">+</span><span class="agent-name">yours</span></div>
    </div>
  </div>
</section>

<section id="why">
  <div class="container">
    <h2 class="section-title">Why Safehouse?</h2>
    <p class="section-sub">Coding agents run as your user. They inherit every permission you have  - read your SSH keys, browse your credentials, write anywhere on disk. The built-in permission prompts help, but skipping them (which most people do) means the agent has the same access as <code class="il">sudo -u $USER</code>. Safehouse uses macOS <code class="il">sandbox-exec</code> to enforce kernel-level restrictions that the agent process cannot bypass, even if it tries.</p>
    <ul class="why-list fade-in">
      <li><strong>Kernel-level enforcement</strong>  - <code class="il">sandbox-exec</code> runs in the macOS kernel. The agent can't escape it, disable it, or write around it. A denied operation returns <code class="il">EPERM</code>, period.</li>
      <li><strong>Deny-first, allow-list model</strong>  - the policy starts with <code class="il">(deny default)</code>. File reads, writes, network, IPC  - everything is blocked unless a rule explicitly permits it.</li>
      <li><strong>Scoped to your project</strong>  - the selected workdir gets read/write (git root by default, otherwise the invocation directory). Toolchains (<code class="il">~/.cargo</code>, <code class="il">~/.npm</code>, etc.) get their own scoped access. Most of your home directory  - SSH keys, other repos, personal files  - is invisible.</li>
      <li><strong>Zero friction</strong>  - no permission prompts, no babysitting. Safehouse enforces boundaries silently. You just type <code class="il">safehouse claude --dangerously-skip-permissions</code> and work.</li>
    </ul>

    <div class="value-banner fade-in" style="margin-top: 48px;">
      <h2><span class="no">No</span> read access to your entire home. <span class="yes">Only</span> what the agent needs.</h2>
      <p>Agents inherit your full user permissions. Safehouse flips this to deny-first  - nothing is readable unless explicitly granted.</p>
      <div class="access-compare">
        <div class="access-box without">
          <h4>Without Safehouse</h4>
          <ul class="path-list">
            <li><span>~/</span> <span class="access-tag rw">full access</span></li>
            <li><span>~/.ssh/id_ed25519</span> <span class="access-tag rw">full access</span></li>
            <li><span>~/.aws/credentials</span> <span class="access-tag rw">full access</span></li>
            <li><span>~/other-repos/</span> <span class="access-tag rw">full access</span></li>
            <li><span>~/Documents/</span> <span class="access-tag rw">full access</span></li>
          </ul>
        </div>
        <div class="access-box with">
          <h4>With Safehouse</h4>
          <ul class="path-list">
            <li><span>~/my-project/</span> <span class="access-tag rw">read/write</span></li>
            <li><span>~/shared-lib/</span> <span class="access-tag ro">read-only</span></li>
            <li><span>~/.ssh/id_ed25519</span> <span class="access-tag denied">denied</span></li>
            <li><span>~/.aws/credentials</span> <span class="access-tag rw">read/write (default, not protected)</span></li>
            <li><span>~/other-repos/</span> <span class="access-tag denied">denied</span></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container">
    <h2 class="section-title">What's allowed vs. denied</h2>
    <p class="section-sub"></p>
    <div class="two-col">
      <div class="policy-card allow fade-in">
        <h3>Allowed</h3>
        <ul>
          <li>System path reads (<code class="il">/usr</code>, <code class="il">/bin</code>, <code class="il">/System</code>)</li>
          <li>Full process exec/fork (agents spawn deep trees)</li>
          <li>Scoped toolchain caches (<code class="il">~/.cargo</code>, <code class="il">~/.npm</code>, etc.)</li>
          <li>Command-matched agent config dirs (<code class="il">~/.claude</code>, <code class="il">~/.cursor</code>, etc.)</li>
          <li>Keychain and Security framework (always-on)</li>
          <li>Shell startup files (<code class="il">~/.zshenv</code>, <code class="il">~/.zprofile</code>)</li>
          <li>Network (fully open by default)</li>
          <li>SSH config and known_hosts (not private keys)</li>
          <li>Cloud credentials (always-on by default; deny via overrides if needed)</li>
          <li>Temp directories (<code class="il">/tmp</code>, <code class="il">/var/folders</code>)</li>
        </ul>
      </div>
      <div class="policy-card deny fade-in">
        <h3>Denied</h3>
        <ul>
          <li>SSH private keys (<code class="il">~/.ssh/id_*</code>)</li>
          <li>Browser profiles (cookies, session data)</li>
          <li>Raw device access (<code class="il">/dev/disk*</code>, <code class="il">/dev/bpf*</code>)</li>
          <li>Setuid/setgid binaries (<code class="il">sudo</code>, <code class="il">passwd</code>)</li>
          <li>Everything not explicitly allowed (deny-first)</li>
          <li>Cloud credentials are NOT denied by default (deny via overrides)</li>
          <li>Directories outside your project and toolchains</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section id="necessary-evils">
  <div class="container">
    <h2 class="section-title">Necessary evils</h2>
    <p class="section-sub">Access that looks scary but is genuinely required. Narrowest scope possible.</p>
    <ul class="why-list fade-in">
      <li><strong><a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/50-integrations-core/keychain.sb">Keychain &amp; Security framework</a></strong>  - most agents store login tokens in macOS Keychain and cannot authenticate without it. We allow read/write to Keychain files and Security mach services (<code class="il">com.apple.SecurityServer</code>, <code class="il">trustd</code>) because agents fail to start without them. This also covers TLS certificate validation.</li>
      <li><strong><a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/10-system-runtime.sb">Device nodes</a></strong>  - agents need <code class="il">/dev/null</code>, <code class="il">/dev/urandom</code>, <code class="il">/dev/tty*</code>, and <code class="il">/dev/ptmx</code> for basic I/O, randomness, and pseudo-terminal allocation. We allow these specific safe nodes but deny raw disk access (<code class="il">/dev/disk*</code>), packet capture (<code class="il">/dev/bpf*</code>), and audit devices.</li>
      <li><strong><a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/20-network.sb">Full network access</a></strong> <span class="evil-tag">Configurable</span>  - agents need package registries, LLM APIs, MCP servers, git remotes, and localhost dev servers. The default policy is fully open, but <a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/20-network.sb">profiles/20-network.sb</a> includes commented alternatives for outbound-only or localhost-only modes.</li>
      <li><strong><a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/10-system-runtime.sb">Mach services &amp; IPC</a></strong>  - macOS frameworks probe dozens of mach services during process init  - notification center, <code class="il">logd</code>, <code class="il">diagnosticd</code>, CoreServices, and more. Without these, even basic CLI tools like <code class="il">git</code> and <code class="il">node</code> crash on startup.</li>
      <li><strong><a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/00-base.sb">Full process exec &amp; fork</a></strong>  - agents orchestrate deep subprocess trees: shell &rarr; git &rarr; ssh &rarr; credential-helper. Restricting <code class="il">process-exec</code> or <code class="il">process-fork</code> would break every agent immediately. Instead, we constrain <em>what</em> those processes can access via filesystem rules.</li>
      <li><strong><a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/50-integrations-core/1password.sb">1Password &amp; credential helpers</a></strong> <span class="evil-tag">Configurable</span>  - git credential helpers, SSH agent forwarding, and CLI tools like <code class="il">gh</code> and <code class="il">glab</code> often rely on 1Password or the macOS SSH agent socket. The <a href="https://github.com/eugene1g/agent-safehouse/blob/main/profiles/50-integrations-core/ssh.sb">SSH profile</a> still denies private key files  - only the agent socket and 1Password CLI integration are allowed.</li>
    </ul>
  </div>
</section>

<section id="getting-started">
  <div class="container">
    <h2 class="section-title">Getting started</h2>
    <p class="section-sub">Download a single shell script, make it executable, and run your agent inside it. No build step, no dependencies  - just Bash and macOS.</p>

    <pre class="fade-in"><code><span class="c"># 1. Download safehouse (single self-contained script)</span>
<span class="k">mkdir</span> <span class="f">-p</span> <span class="s">~/.local/bin</span>
<span class="k">curl</span> <span class="f">-fsSL</span> <span class="s">https://raw.githubusercontent.com/eugene1g/agent-safehouse/main/dist/safehouse.sh</span> \
  <span class="f">-o</span> <span class="s">~/.local/bin/safehouse</span>
<span class="k">chmod</span> <span class="f">+x</span> <span class="s">~/.local/bin/safehouse</span>

<span class="c"># 2. Run any agent inside Safehouse</span>
<span class="k">cd</span> ~/projects/my-app
<span class="k">safehouse</span> claude <span class="f">--dangerously-skip-permissions</span></code></pre>

    <p style="color: var(--text-muted); margin-top: 20px; line-height: 1.7;">Safehouse automatically grants read/write access to the selected workdir (git root by default, otherwise the invocation directory) and read access to your installed toolchains. Most of your home directory  - SSH keys, other repos, personal files  - is denied by the kernel.</p>

    <h3 class="fade-in" style="margin-top: 40px; font-size: 1rem; font-weight: 600; color: var(--text-bright);">See it fail  - proof the sandbox works</h3>
    <p style="color: var(--text-muted); margin-top: 8px; margin-bottom: 16px; line-height: 1.7;">Try reading something sensitive inside safehouse. The kernel blocks it before the process ever sees the data.</p>
    <pre class="fade-in"><code><span class="c"># Try to read your SSH private key  - denied by the kernel</span>
<span class="k">safehouse</span> cat ~/.ssh/id_ed25519
<span class="c"># cat: /Users/you/.ssh/id_ed25519: Operation not permitted</span>

<span class="c"># Try to list another repo  - invisible</span>
<span class="k">safehouse</span> ls ~/other-project
<span class="c"># ls: /Users/you/other-project: Operation not permitted</span>

<span class="c"># But your current project works fine</span>
<span class="k">safehouse</span> ls .
<span class="c"># README.md  src/  package.json  ...</span>

<span class="c"># Run Claude with full auto-approve  - safely sandboxed</span>
<span class="k">safehouse</span> claude <span class="f">--dangerously-skip-permissions</span>
<span class="c"># Claude runs normally, but can't touch anything outside your project</span></code></pre>
  </div>
</section>

<section id="shell-functions">
  <div class="container">
    <h2 class="section-title">Use shell functions to be safe by default</h2>
    <p class="section-sub">Add these functions to your shell config and every agent runs inside Safehouse automatically  - you don't have to remember. This convention keeps full access to the active project (git root by default) while adding read-only access to a shared workspace like <code class="il">~/mywork</code>. To run an agent <em>without</em> the sandbox, type <code class="il">command claude</code> to bypass the function and invoke the real binary.</p>

    <pre class="fade-in" style="margin-bottom: 16px;"><code><span class="c"># ~/.zshrc or ~/.bashrc</span>
<span class="c"># Assumes ~/.local/bin is on your PATH</span>

<span class="c"># Shared convention:</span>
<span class="c"># - Read/write: selected workdir (git root above CWD, else CWD)</span>
<span class="c"># - Read-only:  $HOME/mywork (reference repos/docs/snippets)</span>
<span class="k">safe</span>() { safehouse <span class="f">--add-dirs-ro=</span><span class="s">~/mywork</span> <span class="s">"$@"</span>; }

<span class="c"># Sandboxed  - the default. Just type the command name.</span>
<span class="k">claude</span>()   { <span class="k">safe</span> claude <span class="f">--dangerously-skip-permissions</span> <span class="s">"$@"</span>; }
<span class="k">codex</span>()    { <span class="k">safe</span> codex <span class="f">--dangerously-bypass-approvals-and-sandbox</span> <span class="s">"$@"</span>; }
<span class="k">amp</span>()      { <span class="k">safe</span> amp <span class="f">--dangerously-allow-all</span> <span class="s">"$@"</span>; }
<span class="k">opencode</span>() { OPENCODE_PERMISSION=<span class="s">'{"*":"allow"}'</span> <span class="k">safe</span> opencode <span class="s">"$@"</span>; }
<span class="k">gemini</span>()   { NO_BROWSER=true <span class="k">safe</span> gemini <span class="f">--yolo</span> <span class="s">"$@"</span>; }
<span class="k">pi</span>()       { <span class="k">safe</span> pi <span class="s">"$@"</span>; }

<span class="c"># Unsandboxed  - use `command` to bypass the function and run the real binary.</span>
<span class="c"># command claude               - plain interactive session</span>
<span class="c"># command claude &lt;flags&gt;       - pass any flags directly</span>
</code></pre>

    <p style="color: var(--text-muted); line-height: 1.7;">Example: from <code class="il">~/mywork/app-a</code>, <code class="il">safe claude</code> can edit <code class="il">app-a</code> (workdir grant) and read other paths under <code class="il">~/mywork</code>. The same command run from a repo outside <code class="il">~/mywork</code> still grants that repo read/write while keeping <code class="il">~/mywork</code> read-only.</p>

  </div>
</section>

<section id="usage">
  <div class="container">
    <h2 class="section-title">Usage</h2>
    <p class="section-sub">Safehouse has two modes: <strong>execute mode</strong> wraps a command inside the sandbox, and <strong>policy mode</strong> generates the <code class="il">.sb</code> policy file so you can use it yourself.</p>
    <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 14px; line-height: 1.7;">If you use a per-repo <code class="il">.safehouse</code> file for path grants, treat it as trusted input. Do not run Safehouse against untrusted repos that can edit this file.</p>

    <div class="two-col fade-in" style="margin-bottom: 32px;">
      <div>
        <h3 style="font-size: 1rem; font-weight: 600; color: var(--text-bright); margin-bottom: 6px;">Execute mode</h3>
        <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 14px;">Pass a command and Safehouse generates a policy, then runs it inside.</p>
        <pre><code><span class="c"># Run Claude in the current repo</span>
<span class="k">safehouse</span> claude <span class="f">--dangerously-skip-permissions</span>

<span class="c"># Grant extra writable directories</span>
<span class="k">safehouse</span> <span class="f">--add-dirs=</span><span class="s">/tmp/scratch:/data/shared</span> <span class="f">--</span> claude

<span class="c"># Grant read-only access to reference code</span>
<span class="k">safehouse</span> <span class="f">--add-dirs-ro=</span><span class="s">/repos/shared-lib</span> <span class="f">--</span> aider

<span class="c"># Enable Docker socket access (off by default)</span>
<span class="k">safehouse</span> <span class="f">--enable=</span><span class="s">docker</span> <span class="f">--</span> docker ps

<span class="c"># Restore legacy behavior and load all agent profiles</span>
<span class="k">safehouse</span> <span class="f">--enable=</span><span class="s">all-agents</span> codex</code></pre>
      </div>
      <div>
        <h3 style="font-size: 1rem; font-weight: 600; color: var(--text-bright); margin-bottom: 6px;">Policy mode</h3>
        <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 14px;">Run with no command to generate a policy file. Feed it to <code class="il">sandbox-exec</code> yourself, or inspect it first.</p>
        <pre><code><span class="c"># Print the policy file path</span>
<span class="k">safehouse</span>

<span class="c"># Print the full policy text to stdout</span>
<span class="k">safehouse</span> <span class="f">--stdout</span>

<span class="c"># Write to a specific file</span>
<span class="k">safehouse</span> <span class="f">--output=</span><span class="s">my-policy.sb</span>

<span class="c"># Use the generated policy with sandbox-exec</span>
<span class="k">sandbox-exec</span> <span class="f">-f</span> <span class="s">"$(safehouse)"</span> <span class="f">--</span> claude</code></pre>
      </div>
    </div>

    <h3 class="fade-in" style="font-size: 1rem; font-weight: 600; color: var(--text-bright); margin-bottom: 6px;">Appending custom rules</h3>
    <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 14px; line-height: 1.7;">Use <code class="il">--append-profile</code> to layer your own sandbox rules on top of the generated policy. Appended rules load last, so they can tighten or extend access. Repeatable  - pass it multiple times and files are appended in order.</p>
    <pre class="fade-in"><code><span class="c"># deny-aws.sb  - block AWS credential reads</span>
<span class="f">(deny file-read*</span> <span class="s">(home-subpath "/.aws")</span><span class="f">)</span>

<span class="c"># allow-data.sb  - grant access to a shared data directory</span>
<span class="f">(allow file-read*</span> <span class="s">(subpath "/data/shared")</span><span class="f">)</span></code></pre>
    <pre class="fade-in" style="margin-top: 10px;"><code><span class="c"># Stack personal rules onto the default policy</span>
<span class="k">safehouse</span> <span class="f">--append-profile=</span><span class="s">deny-aws.sb</span> <span class="f">--append-profile=</span><span class="s">allow-data.sb</span> <span class="f">--</span> claude <span class="f">--dangerously-skip-permissions</span></code></pre>

    <h3 class="fade-in" style="font-size: 1rem; font-weight: 600; color: var(--text-bright); margin-top: 40px; margin-bottom: 6px;">Electron apps under Safehouse</h3>
    <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 14px; line-height: 1.7;">Electron/Chromium helpers try to init an internal sandbox. Under Safehouse the process tree is already inside macOS Seatbelt, so nested sandbox re-init is OS-blocked. Launch with <code class="il">--no-sandbox</code> to disable the inner sandbox while keeping the outer policy.</p>
    <pre class="fade-in"><code><span class="c"># Primary launch mode</span>
<span class="k">safehouse</span> <span class="f">--enable=</span><span class="s">electron</span> <span class="f">--</span> /Applications/Claude.app/Contents/MacOS/Claude <span class="f">--no-sandbox</span>

<span class="c"># Compatibility fallback</span>
<span class="k">ELECTRON_DISABLE_SANDBOX=1</span> <span class="k">safehouse</span> <span class="f">--enable=</span><span class="s">electron</span> <span class="f">--</span> /Applications/Claude.app/Contents/MacOS/Claude</code></pre>

    <h3 class="fade-in" style="font-size: 1rem; font-weight: 600; color: var(--text-bright); margin-top: 40px; margin-bottom: 6px;">Claude launcher and "Allow bypass permissions mode"</h3>
    <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 14px; line-height: 1.7;">Launching Claude Desktop via <code class="il">Claude.app.sandboxed.command</code> applies Safehouse from the outside. That means "Allow bypass permissions mode" can keep fast in-app execution while the outer sandbox policy still constrains filesystem and IPC access. Use the online launcher for runtime policy updates, or <code class="il">Claude.app.sandboxed-offline.command</code> for embedded-policy offline use.</p>
    <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 14px; line-height: 1.7;">Reference discussion: <a href="https://x.com/lydiahallie/status/2021012075712266471" target="_blank" rel="noopener noreferrer">Lydia Hallie on X</a>.</p>
  </div>
</section>



<script>
// Close mobile nav on link click
document.querySelectorAll('.nav-links a').forEach(function(a) {
  a.addEventListener('click', function() {
    document.getElementById('nav-toggle').checked = false;
  });
});

// Scroll-triggered fade-in
(function() {
  var els = document.querySelectorAll('.fade-in');
  if (!els.length) return;

  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        // Stagger siblings
        var parent = entry.target.parentElement;
        var siblings = parent.querySelectorAll('.fade-in');
        var idx = Array.prototype.indexOf.call(siblings, entry.target);
        entry.target.style.transitionDelay = (idx * 0.06) + 's';
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });

  els.forEach(function(el) { observer.observe(el); });
})();
</script>
</body>
</html>
