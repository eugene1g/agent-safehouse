;; ---------------------------------------------------------------------------
;; Agent: Gemini
;; Gemini CLI binary, state, and config paths.
;; Source: 60-agents/gemini.sb
;; ---------------------------------------------------------------------------

;; - npm global install path follows package-manager prefix/bin
;; - ~/.local/bin is the common user-level target and fallback
;; - local state/config
;; - package updates are package-manager or built-in update driven via entrypoint

(allow file-read* file-write*
    (home-prefix "/.local/bin/gemini")
    (home-subpath "/.gemini")
    (home-subpath "/.cache/gemini")
)

;; Keychain write access: Gemini CLI stores auth tokens via keytar (macOS Keychain).
(allow file-write*
    (home-subpath "/Library/Keychains")
    (home-literal "/Library/Preferences/com.apple.security.plist")
)

;; Enterprise managed settings
(allow file-read*
    (subpath "/Library/Application Support/GeminiCli")
)
