;; ---------------------------------------------------------------------------
;; Agent: Kilo Code
;; Kilo Code CLI binary, state, and config paths.
;; Source: 60-agents/kilo-code.sb
;; $$require=55-integrations-optional/keychain.sb$$
;; ---------------------------------------------------------------------------

;; - npm package @kilocode/cli installs `kilocode` and `kilo` executables
;; - ~/.local/bin is the common user-level target and fallback for npm/pnpm shims
;; - Kilo CLI stores config, logs, sessions, and commands under ~/.kilocode (and legacy ~/.roo)
;; - CLI uses VS Code extension global storage for tasks/sessions/settings/cache
;; - MDM config is read from /Library/Application Support/RooCode
;; - macOS MCP server directory may live under ~/Documents/Kilo-Code/MCP

(allow file-read* file-write*
    (home-prefix "/.local/bin/kilo")
    (home-prefix "/.local/bin/kilocode")
    (home-subpath "/.kilocode")
    (home-subpath "/.roo")
    ;; Observed on recent kilo CLI builds (Bun-based): XDG state under ~/.local/share/kilo.
    (home-subpath "/.config/kilo")
    (home-subpath "/.cache/kilo")
    (home-subpath "/.local/share/kilo")
    (home-subpath "/.local/state/kilo")
    (home-subpath "/Documents/Kilo-Code/MCP")
    (home-subpath "/Library/Application Support/Code/User/globalStorage/kilocode.kilo-code")
)

(allow file-read*
    (subpath "/Library/Application Support/RooCode")
)
